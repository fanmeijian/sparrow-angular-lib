<button class="button" mat-flat-button color="primary" (click)="new()">
  新增
</button>
<button
  class="button"
  mat-flat-button
  color="warn"
  (click)="delete()"
  [disabled]="checklistSelection.isEmpty()"
>
  删除
</button>
<button
  class="button"
  mat-flat-button
  color="primary"
  (click)="permission()"
  [disabled]="checklistSelection.isEmpty()"
>
  授权
</button>
<div
  class="tree"
  style="
    display: flex;
    flex-direction: row;
    width: 100%;
    height: calc(100vh - 200px);
    overflow-y: scroll;
  "
>
  <mat-tree
    class="mat-tree"
    [dataSource]="dataSource"
    [treeControl]="treeControl"
    style="width: 250px; height: 100%; overflow-y: scroll"
  >
    <mat-tree-node
      *matTreeNodeDef="let node"
      matTreeNodeToggle
      matTreeNodePadding
    >
      <button mat-icon-button disabled></button>
      <div>
        <mat-checkbox
          class="checklist-leaf-node"
          [checked]="checklistSelection.isSelected(node)"
          (change)="todoLeafItemSelectionToggle(node)"
        ></mat-checkbox
        ><span
          (click)="selectedMenu = node"
          [class]="
            node.me.id === selectedMenu?.me?.id
              ? 'tree-node-name-selected'
              : 'tree-node-name'
          "
          >[{{ node.me.code }}]{{ node.me.name }}</span
        >
      </div>
    </mat-tree-node>

    <mat-tree-node
      *matTreeNodeDef="let node; when: hasNoContent"
      matTreeNodePadding
    >
      <button mat-icon-button disabled></button>
    </mat-tree-node>

    <mat-tree-node
      *matTreeNodeDef="let node; when: hasChild"
      matTreeNodePadding
    >
      <button
        mat-icon-button
        matTreeNodeToggle
        [attr.aria-label]="'Toggle ' + node.me.name"
      >
        <mat-icon class="mat-icon-rtl-mirror">
          {{ treeControl.isExpanded(node) ? "expand_more" : "chevron_right" }}
        </mat-icon>
      </button>
      <div>
        <mat-checkbox
          class="checklist-leaf-node"
          [checked]="descendantsAllSelected(node)"
          [indeterminate]="descendantsPartiallySelected(node)"
          (change)="todoItemSelectionToggle(node)"
        ></mat-checkbox
        ><span
          (click)="selectedMenu = node"
          [class]="
            node.me.id === selectedMenu?.me?.id
              ? 'tree-node-name-selected'
              : 'tree-node-name'
          "
          >[{{ node.me.code }}]{{ node.me.name }}</span
        >
      </div>
    </mat-tree-node>
  </mat-tree>
  <div class="tree-right">
    <h3>
      菜单详情<button
        type="button"
        mat-icon-button
        color="primary"
        (click)="edit(selectedMenu)"
      >
        <mat-icon>edit</mat-icon>
      </button>
    </h3>
    <!-- <mat-divider></mat-divider> -->
    <div class="detail">
      <span>名称</span><span>{{ selectedMenu?.me.name }}</span> <span>代码</span
      ><span>{{ selectedMenu?.me.code }}</span> <span>url</span
      ><span>{{ selectedMenu?.me.url }}</span> <span>图标</span
      ><span>{{ selectedMenu?.me.icon }}</span> <span>上级</span
      ><span>{{ selectedMenu?.me.parentId }}</span>
    </div>
  </div>
</div>
